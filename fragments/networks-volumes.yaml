# Networks and Volumes - Uses YAML anchors for deployment method selection
# Set DEPLOYMENT_MODE environment variable to 'swarm' or 'proxy'

x-swarm-network: &swarm-network
  driver: overlay
  attachable: true

x-proxy-network: &proxy-network
  driver: bridge

volumes:
  postgres_primary_data:
    driver: local
  postgres_replica_data:
    driver: local

networks:
  backend-db-network:
    <<: *swarm-network
  frontend-backend-network:
    <<: *swarm-network
